@extends('frontend.layouts.app')

@section('title', app_name() . ' | '.__('labels.frontend.auth.register_box_title'))

@push('after-styles')
    <link href="{{ asset('vendor/css/plugins/datapicker/bootstrap-datepicker.css') }}" rel="stylesheet">
    <style>
        .container-login100 {
            width: 100%;
            min-height: 100vh;
            display: -webkit-box;
            display: -webkit-flex;
            display: -moz-box;
            display: -ms-flexbox;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 15px;
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            background-image: url("/img/bg-01.jpg");
        }
        .white, .white > a{
            color:white;
        }

        .privacy_description{
            max-height: 213px;
            overflow-y: scroll;
        }

        a.socialite {
            font-size: 16px;
        }
.arrowpopup {
position: relative;
display: inline-block;
cursor: pointer;
}
.arrowpopup .tooltiptext {
display: none;
width: 250px;
background-color: #1080d0;
color: white;
/*text-align: center;*/
border-radius: 4px;
padding: 10px ;
position: absolute;
bottom: 80%;
left: 0%;
margin-left: -62px;
margin-top: 100px;
}
.arrowpopup .tooltiptext::after {
/*content: "33";*/
position: absolute;
top: 100%;
left: 50%;
margin-left: -5px;
border-width: 5px;
border-style: solid;
border-color: #1080d0 transparent transparent transparent;
}
.arrowpopup .show {
visibility: visible;
}
.field-icon {
  float: left;
  margin-left: 303px;
  margin-top: -23px;
  position: relative;
  z-index: 2;
}
    </style>

@endpush

@section('content')
@php
                    if($country_code=='UK'){
                        $countryCode="GB";
                    }else{
                        $countryCode=$country_code;
                    }
                    @endphp
    <div class="row">
        <div class="col-lg-12">
            <div class="wrapper wrapper-content animated fadeInRight container-login100">
                <div class="loginColumns animated fadeInDown">
                    <div class="row">
                        @include('includes.partials.messages')
                        <div class="col-md-6">
                            <h2 class="font-bold white">{{__('frontend.register.static.title')}}</h2>
                            <p class="white">{{__('frontend.register.static.subtitle')}}</p>
                            <div class="row">
                                <div class="col-12 col-md-12">
                                    <div class="text-center white social_container">
                                        {!! $socialiteLinks !!}
                                    </div>
                                </div><!--/ .col -->
                            </div><!-- / .row -->
                        </div>
                        <div class="col-md-6">
                            <div class="ibox-content">
                                {{ html()->form('POST', route('frontend.auth.register.post'))->class('registration_form')->open() }}

                                <div class="row">
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="text" name="first_name" id="first_name" class="form-control" required>
                                            <label class="form-control-placeholder" for="first_name">{{__('validation.attributes.frontend.first_name')}}</label>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="text" name="middle_name" id="middle_name" class="form-control" >
                                            <label class="form-control-placeholder" for="middle_name">{{__('validation.attributes.frontend.middle_name')}}</label>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="text" name="last_name" maxlength="191" id="last_name" class="form-control" required>
                                            <label class="form-control-placeholder" for="last_name">{{__('validation.attributes.frontend.last_name')}}</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="email" name="email" id="email" value="" maxlength="191" autocomplete="rutjfkde" required="required" class="form-control">
                                            <label class="form-control-placeholder" for="email">{{__('validation.attributes.frontend.email')}}</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="password" name="password" id="password" required="required" autocomplete="rutjfkde" class="form-control">
                                            <label class="form-control-placeholder" for="password">{{__('validation.attributes.frontend.password')}}
                                                <div class="arrowpopup"><i class="fa fa-info-circle" style="color:grey;" ></i><span id="tooltipdemo" class="tooltiptext" style="text-align:left"><p style="padding-left: 3px;">{{__('validation.attributes.frontend.password_require')}}</p>
                                              <ul style="margin-top:-10px; padding-left: 13px;"><li>{{__('validation.attributes.frontend.password_require1')}}</li>
                                            <li>{{__('validation.attributes.frontend.password_require2')}}</li>
                                            <li>{{__('validation.attributes.frontend.password_require3')}}</li>
                                            <li>{{__('validation.attributes.frontend.password_require4')}}.</li>
                                          </ul>
                                        </span></div>
                                            
                                          </label>
                                          <span toggle="#password" class="fa fa-fw fa-eye-slash field-icon toggle-password"></span>
                                          <span style="color: red;" id="password-msg"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-12 mx-auto">
                                        <div class="form-group">
                                            <input type="password" name="password_confirmation" autocomplete="off" id="password_confirmation" required="required" class="form-control">
                                            <label class="form-control-placeholder" for="password_confirmation">{{__('validation.attributes.frontend.password_confirmation')}}</label>
                                             <span toggle="#password_confirmation" class="fa fa-fw fa-eye-slash field-icon toggle-password-confirm"></span>

                                        </div>
                                    </div>
                                </div>
                                {{--<div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            {{ html()->label(__('validation.attributes.frontend.first_name'))->for('first_name') }}
                                            {{ html()->text('first_name')
                                                ->class('form-control')
                                                ->placeholder(__('validation.attributes.frontend.first_name'))
                                                ->attribute('maxlength', 191)
                                                ->attribute('autocomplete', 'off')
                                            }}
                                        </div><!--col-->
                                    </div><!--row-->

                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            {{ html()->label(__('validation.attributes.frontend.last_name'))->for('last_name') }}

                                            {{ html()->text('last_name')
                                                ->class('form-control')
                                                ->placeholder(__('validation.attributes.frontend.last_name'))
                                                ->attribute('maxlength', 191)
                                                ->attribute('autocomplete', 'off')
                                            }}
                                        </div><!--form-group-->
                                    </div><!--col-->
                                </div><!--row-->--}}

                                {{--<div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            {{ html()->label(__('validation.attributes.frontend.email'))->for('email') }}

                                            {{ html()->email('email')
                                                ->class('form-control')
                                                ->placeholder(__('validation.attributes.frontend.email'))
                                                ->attribute('maxlength', 191)
                                                ->attribute('autocomplete', 'off')
                                                ->required() }}
                                        </div><!--form-group-->
                                    </div><!--col-->
                                </div><!--row-->--}}

                               {{-- <div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            {{ html()->label(__('validation.attributes.frontend.password'))->for('password') }}

                                            {{ html()->password('password')
                                                ->class('form-control')
                                                ->placeholder(__('validation.attributes.frontend.password'))
                                                ->required() }}
                                                <span style="color: red;" id="password-msg"></span>
                                        </div><!--form-group-->
                                    </div><!--col-->
                                </div><!--row-->--}}

                                {{--<div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            {{ html()->label(__('validation.attributes.frontend.password_confirmation'))->for('password_confirmation') }}

                                            {{ html()->password('password_confirmation')
                                                ->class('form-control')
                                                ->placeholder(__('validation.attributes.frontend.password_confirmation'))
                                                ->required() }}
                                                <span style="color: red;" id="password-msg-con"></span>
                                        </div><!--form-group-->
                                    </div><!--col-->
                                </div><!--row-->--}}

                                {{--{!! CustomBootForm::generateCountrySelect('country', 'Country', $countries, '240', ['id'=>'country_select']) !!}--}}
                                <div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            <label for="gender" class="txt1">{{__('frontend.register.static.gender')}}</label>
                                            <br/>
                                            <label class="radio-inline">
                                                <input type="radio" value="male" class="form-check-input" name="gender" {{ old('gender')=="male" ? 'checked='.'"checked"' : '' }}>{{__('frontend.register.static.gender_male')}}
                                            </label>

                                            <label class="radio-inline">
                                                <input type="radio" value="female" class="form-check-input" name="gender" {{ old('gender')=="female" ? 'checked='.'"checked"' : '' }}>{{__('frontend.register.static.gender_female')}}
                                            </label>

                                            @if ($errors->has('gender'))
                                                <span class="invalid-feedback">
                                                    <strong>{{ $errors->first('gender') }}</strong>
                                                </span>
                                            @endif
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            <label for="dob" class="txt1">{{ __('DOB') }}</label>
                                            <div class="input-group date input-group-date">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input autocomplete="off" type="text" id="dob" name="dob" value="" class="input100 form-control {{ $errors->has('dob') ? ' is-invalid' : '' }}" placeholder="MM/DD/YYYY" style="padding: 0;"/>
                                            </div>
                                            @if ($errors->has('dob'))
                                                <span class="invalid-feedback">
                                                    <strong>{{ $errors->first('dob') }}</strong>
                                                </span>
                                            @endif
                                        </div>
                                    </div>
                                </div>

                                @if( !empty($countries) )
                                    <div class="row country_language">
                                        <div class="col-6 col-md-6">
                                            <div class="form-group">
                                                {{ html()->label(__('frontend.register.static.country'))->for('country') }}
                                                <select autocomplete="off" id="country" class="form-control" name="country" required title="country">
                                                    @foreach($countries as $country)
                                                        <option @if($country->country_code==@$country_code) selected @endif value="{{$country->country_code}}" >{{$country->country_name}}</option>
                                                        {{--<option value="{{$country->id}}" {{ ($country->country_code == $currentCountry)?'selected="true"':'' }}>{{$translatedCountry->name}}</option>--}}
                                                    @endforeach
                                                </select>
                                            </div><!--form-group-->
                                        </div><!--col-->
                                        <div class="col-6 col-md-6">
                                            <div class="form-group">
                                                {{ html()->label(__('frontend.register.static.language'))->for('language') }}
                                                <select autocomplete="off" class="form-control" id="language" name="language" required title="language">

                                                </select>
                                            </div><!--form-group-->
                                        </div><!--col-->
                                    </div><!--row-->
                                @endif

                                @if (config('access.captcha.registration'))
                                    <div class="row">
                                        <div class="col-12 col-md-12">
                                            <div class="form-group">
                                                {!! Captcha::display() !!}
                                                {{ html()->hidden('captcha_status', 'true') }}
                                            </div>
                                        </div><!--col-->
                                    </div><!--row-->
                                @endif

                                <div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" value="1" class="form-check-input"  name="consent" required>&nbsp; {{__('labels.frontend.auth.checkbox_register')}}
                                                <a href="{{route('frontend.cms.term_condition')}}"> {{__('frontend.index.footer.links.term_condition')}}</a> & <a href="{{route('frontend.cms.privacy')}}">{{__('frontend.index.footer.links.privacy_policy')}}</a>
                                            </label>
                                        </div>
                                    </div>
                                </div><!--row-->

                                <div class="row">
                                    <button class="btn btn-block btn-primary" type="submit">{{__('labels.frontend.auth.register_button')}}</button>
                                </div>
                                {{--<div class="row">
                                    <div class="col-12 col-md-12">
                                        <div class="form-group mb-0 clearfix">
                                            {{ form_submit(__('labels.frontend.auth.register_button'), 'btn btn-success btn-sm pull-right register_button') }}
                                        </div><!--form-group-->
                                    </div><!--col-->
                                </div><!--row-->--}}
                                <br />
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group">
                                            {{__('frontend.index.contact_us.commit_statement')}}
                                        </div>
                                    </div>
                                </div><!--row-->
                                <input type="hidden" id="requestid" name="rid" value="{{$uuid}}" />
                                <input type="hidden" id="eventid" name="eid" value="{{$ip}}" />
                                <input type="hidden" id="cc" value="{{$countryCode}}" />
                                <input type="hidden" id="dfiq_check" name="dfiq_check" value="{{$dfiq}}">
                                {{ html()->form()->close() }}
                                <p class="m-t">
                                    {{--<small>Inspinia we app framework base on Bootstrap 3 &copy; 2014</small>--}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <hr/>
                    @include('frontend.cms.page.cms_footer')
                </div>
            </div>
        </div>
    </div>

    <!-- The Modal -->
    {{--<div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <div class="row">
                        <div class="col-sm-12">
                            <h4 class="modal-title">{{__('frontend.register.static.footer_title_2')}}</h4>
                        </div>
                        <div class="col-sm-12">
                            <p>{{__('frontend.register.static.footer_terms')}}</p>
                        </div>
                    </div>


                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <h4>{{__('frontend.register.static.footer_privacy_priority')}}</h4>

                    <div class="privacy_description p-t-20">
                        <p>{{__('frontend.register.static.footer_welcome')}}</p>
                        <ul>
                            {!!__('frontend.register.static.footer_required_details_info')!!}
                        </ul>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <a href="javascript:void(0);" data-dismiss="modal">{{__('frontend.register.static.footer_link_do_not_create_account')}}</a>
                    <button type="button" class="btn btn-success terms_accept" data-dismiss="modal">{{__('frontend.register.static.footer_button_accept')}}</button>
                </div>

            </div>
        </div>
    </div>--}}
@endsection


@push('after-styles')
<style>

    .form-group {
        position: relative;
        margin-bottom: 1.5rem;
    }

    .form-control-placeholder {
        position: absolute;
        top: 0;
        padding: 7px 0 0 13px;
        transition: all 200ms;
        opacity: 0.5;
    }
/*.form-control:required:valid + .form-control-placeholder, .form-control:optional:not([value=""]):not(:focus) + .form-control-placeholder, */
    .form-control:focus + .form-control-placeholder, .form-control + .form-control-placeholder {
        font-size: 75%;
        transform: translate3d(0, -100%, 0);
        opacity: 1;
    }


    .emsg{
        border: 1px solid red;
    }
</style>
@endpush
@push('after-scripts')
    @if (config('access.captcha.registration'))
        {!! Captcha::script() !!}
    @endif
<script type="text/javascript" id="forensic_script_id" src="https://api-cdn.dfiq.net/scripts/forensic-v5.0.0.min.js" data-key="29109E607D0B6E11DE0B966F50EA617A-5004-1"></script>
<!-- Date range use moment.js same as full calendar plugin -->
<script src="{{asset('vendor/js/plugins/fullcalendar/moment.min.js')}}"></script>

<!-- Data picker -->
<script src="{{asset('vendor/js/plugins/datapicker/bootstrap-datepicker.js')}}"></script>

<script>
     $(document).on('click',".toggle-password",function() {

  $(this).toggleClass("fa-eye fa-eye-slash");
  var input = $($(this).attr("toggle"));
  if (input.attr("type") == "password") {
    input.attr("type", "text");
  } else {
    input.attr("type", "password");
  }
});
      $(document).on('click',".toggle-password-confirm",function() {

  $(this).toggleClass("fa-eye fa-eye-slash");
  var input = $($(this).attr("toggle"));
  if (input.attr("type") == "password") {
    input.attr("type", "text");
  } else {
    input.attr("type", "password");
  }
});
    $(document).on('mouseover','.arrowpopup',function(){
         var tt = document.getElementById("tooltipdemo");
       // tt.classList.toggle("show");

    });
    $(".arrowpopup").hover(
  function () {
    
    $("#tooltipdemo").show();
  }, 
  function () {
    $("#tooltipdemo").hide();
    
  }
);
$(document).ready(function() {

        
    var country_code = $('select#country').val();

    var flag = 0;
    var msg = '';
    $('.registration_form .form-control').blur(function() {

        var info = $(this).val();
        var id = $(this).attr('id');
        
        if(id == 'first_name' || id == 'last_name')
        {
            var regexname=/^([a-zA-Z]{3,16})$/;
            if (!regexname.test(info)) {
                // there is a mismatch, hence show the error message                
                $(this).addClass('emsg');
                flag = 1;
                msg += 'Name field can not have number or special characters.\n';
            }
            else{
                flag = 0;
                $(this).removeClass('emsg');
            }
        }
        else if(id == 'middle_name' && info !="")
        {
             
             info1=info.replace(/\s+/g, '');
            var regexname=/^([a-zA-Z]{3,16})$/;
            if (!regexname.test(info1)) {
                // there is a mismatch, hence show the error message                
                $(this).addClass('emsg');
                flag = 1;
                msg += 'Name field can not have number or special characters.\n';
            }
            else{
                flag = 0;
                $(this).removeClass('emsg');
            }
        }
        else if(id == 'email')
        {
            var re = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;

            if(re.test(info))
            {
                var header = {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content'),
                }
                axios.get("{{route('frontend.auth.validateEmail')}}",{
                    params:{
                        email : info,
                    }
                }).then(function (response) {
                    console.log(response.data);
                    //console.log('response=='+JSON.stringify(response));
                    if(response.status == 200)
                    {
                        if(response.data > 0)
                        {
                            console.log('case-2');
                            if(response.data=='2'){
                                setTimeout(function() {
                                toastr.error("Invalid email address. Please check the email and try again.", 'Error' );
                                }, 400);
                            }else if(response.data==1){
                            setTimeout(function() {
                                toastr.error("Provided Email has already been registered.", 'Error' );
                                }, 400);
                           }
                            msg += 'Provided Email has already been registered.\n';
                            $('#email').addClass('emsg');
                            flag = 1;
                        }else{
                            flag = 0;
                            $('#email').removeClass('emsg');                
                        }
                        var dfiq_check=$("#dfiq_check").val();
                        if(flag==0 && dfiq_check==1){
                          invokeAPI(info);  
                        }                      
                    }
                }).catch(function (error) {
                    console.log('error occured');
                });
            }else{
                $(this).addClass('emsg');
                flag = 1;
                msg += 'Please Enter valid email.\n';
            }
        }
        else if(id == 'password_confirmation' || id=='password'){
            var pass = $("#password").val();
            var number = /([0-9])/;
            var alphabets = /([a-zA-Z])/;
            var special_characters = /([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
            if(pass.length<8)
            {
                $(this).addClass('emsg');
                $('#password-msg').html('Password should be atleast 8 characters.')
                //$(this).show();
                flag = 1;
                msg += 'Weak (should be atleast 8 characters.).\n';
                return false;
            }else{ 
                flag = 0;
                $('#password-msg').html('');
                $(this).removeClass('emsg');
            } 

            if ($('#password').val().match(number) && $('#password').val().match(alphabets) && $('#password').val().match(special_characters) && flag==0) {
               flag = 0;
                $(this).removeClass('emsg');
                $('#password-msg').html('')
        } else {
            $(this).addClass('emsg');
                //$(this).show();
                  $('#password-msg').html('Password should include alphabets, numbers and special characters or some combination.')
                flag = 1;
                msg += 'Medium (should include alphabets, numbers and special characters or some combination.).\n';
           
        }
            if(pass != info){
                // there is a mismatch, hence show the error message
                $(this).addClass('emsg');
                //$(this).show();
                flag = 1;
                msg += 'Passwords do not match.\n';
            }
            else{
                flag = 0;
                $(this).removeClass('emsg');
            } 
        }

        
    });

    $('.registration_form').on('submit', function(){
        if(flag || $('.emsg').length > 0){
            $(':input[type="submit"]').prop('disabled', false);
            alert('Please provide valid input for the marked fields');
            return false;
        }
        return true;
    })

    fetchLanguage(country_code);
    /*$("#password").password('toggle');*/

    $('a.socialite').click(function (e) {
        e.preventDefault();
        $('#myModal').modal('toggle');
        window.location.hash = $(this).attr('data-action');
    });

    /*$('.register_button').click(function (e) {
        e.preventDefault();
        $('#myModal').modal('toggle');
        window.location.hash = 'register_form';
    });*/

    $('.register_button').click(function (e) {
        var type = window.location.hash.substr(1);
        console.log('type');

        if(!type || type === 'register_form') {
            var form = jQuery(document).find('.registration_form');
            //jQuery('.registration_form').submit();
            console.log(form);
            form.submit();
            return false;
        }

        var socialAnchor = $('div.social_container').find("a[data-action='"+type+"']");
        if(socialAnchor) {
            window.location.href = socialAnchor.attr('href');
        }else{
            console.log('popup error occured')
        }


    });

    $('select#country').on('change',function(e){
        var country_code = $('select#country').val();
        fetchLanguage(country_code)
    });

    function fetchLanguage(country_code)
    {
        var header = {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content'),
        }
        if(!country_code || country_code == 0){
            return false;
        }
        axios.get("{{route('frontend.auth.language')}}",{
            params:{
                country_code: country_code,
            }
        }).then(function (response) {
            if(response.status === 200){
                $select = $('#language');
                $select.find('option').remove();
                var lang = response.data;
                $.each(lang, function (value, name) {
                    $select.append($('<option />', {value: value, text: name}));
                });
            }
        }).catch(function (error) {
            // handle error
        }).then(function () {
            // always executed
            console.log('always executed');
        });
    }
});
$('.input-group-date').datepicker({
    format: {
        /*
         * Say our UI should display a week ahead,
         * but textbox should store the actual date.
         * This is useful if we need UI to select local dates,
         * but store in UTC
         */
        toDisplay: function (date, format, language) {
            var d = new Date(date);
            d.setMinutes( d.getMinutes() + d.getTimezoneOffset() );
            d = moment(d).format("MM/DD/YYYY");
            return d;
        },
        toValue: function (date, format, language) {
            var d = new Date(date);
            d.setMinutes( d.getMinutes() + d.getTimezoneOffset() );
            d = moment(d).format("MM/DD/YYYY");
            return d;
        }
    },
    startView: 2,
    todayBtn: false,
    keyboardNavigation: true,
    forceParse: false,
    autoclose: true
});
$('input').attr('autocomplete', 'off');
function invokeAPI(info) {
                var req = document.getElementById("requestid").value;
                var event = document.getElementById("eventid").value;
                var country = document.getElementById("cc").value;
                var utm_source="SjPanel";
                //$('#form-dispaly').hide();
               // $('.loader').show();
                var uniquenessParam = Forensic.createUniquenessParam(event,null, false);
                var geoParam = Forensic.createGeoParam(country);
                Forensic.forensic(req, successCallback, errorCallback, uniquenessParam, geoParam, null, null, utm_source);
            }
             function successCallback(jsonData) {
                var FlagStatus=false;
                var Message='';
                console.log(jsonData);
               // $('#form-dispaly').hide();
               // $('.loader').show();
                /*$.ajaxSetup({
                headers: {
                 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                }
                });*/
                var email=$('#email').val();
                var ip_address=$('#eventid').val();
                var panelistId=$('#eventid').val();
                $.ajax({
                    url: "{{ route('frontend.auth.register.dfiqData.post') }}",
                    type: 'GET',
                    data: {datajsondata:jsonData,email:email,ip_address:ip_address,panelistId:panelistId,user_id:''},
                    success: function(response){
                       // window.location=addressBar+"&DFIQ=true";
                    }, 
                    async: true
                    });

                if (jsonData.forensic.marker.score > 26 ||  jsonData.forensic.unique.isEventUnique == false){
                    console.log("fraud score >= 25 or not unique"); // Add your logic to handle non-fraud/unique

                    
                    if(jsonData.forensic.marker.isBot == true  && FlagStatus==false){
                        Message="Bot Detected. Registeration through Bot is not allowed.";
                        FlagStatus=true;
                    }
                    
                    if(jsonData.forensic.marker.isAnonymous == true  && FlagStatus==false){
                        Message="VPN Detected, Registeration through VPN is not allowed.";
                        FlagStatus=true;
                    }
                    if(jsonData.forensic.marker.isGeoTz == false  && FlagStatus==false){
                        Message="You failed security check. Registeration not allowed for you.";
                        FlagStatus=true;
                    }
                    if(jsonData.forensic.marker.isTampered == true  && FlagStatus==false){
                        Message="You failed istampered check. Registeration not allowed for you.";
                        FlagStatus=true;
                    }
                    if(jsonData.forensic.unique.isEventUnique == false  && FlagStatus==false){
                        Message="Registeration from Multiple devices is not allowed.";
                        FlagStatus=true;
                    }
                }
                if(FlagStatus==true){
                    setTimeout(function() {
                                toastr.error(Message, '' );
                                }, 400);
                    $('.btn').prop('disabled','true');
                 }else{
                    $('.btn').prop('disabled','false');
                 }
            };
            function errorCallback(jsonData) {
                console.log(jsonData.error.message); // Add your logic to handle errors
            }
</script>

@endpush
